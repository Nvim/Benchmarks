#include "../../include/lib.h"

void counting_sort(int *tab, int taille) {

  int max = tab[0];
  for (int i = 1; i < taille; i++) {
    if (tab[i] > max) {
      max = tab[i];
    }
  }

  int *count = (int *)malloc((max + 1) * sizeof(int));
  int *output = (int *)malloc(taille * sizeof(int));

  for (int i = 0; i <= max; i++) {
    count[i] = 0;
  }

  for (int i = 0; i < taille; i++) {
    count[tab[i]]++;
  }

  for (int i = 1; i <= max; i++) {
    count[i] += count[i - 1];
  }

  for (int i = taille - 1; i >= 0; i--) {
    output[count[tab[i]] - 1] = tab[i];
    count[tab[i]]--;
  }

  for (int i = 0; i < taille; i++) {
    tab[i] = output[i];
  }

  free(count);
  free(output);
}
